{let e=()=>{let e=$(".new-post-form");e.submit((n=>{n.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:e.serialize(),success:e=>{console.log(e);let n=t(e.data.post,e.data.name);$(".posts-list-container>ul").prepend(n),s(e.data.post._id),o($(" .delete-post-button",n)),p($(" .toggle-button-post",n)),new Noty({theme:"relax",text:"Post created successfully!",type:"success",layout:"topRight",timeout:3e3}).show()},error:e=>{console.log(e.responseText)}})}))},t=(e,t)=>$(`<li class="post-${e._id}">\n  <small>\n    <a class="delete-post-button" href="/posts/destroy/${e._id}">X</a>\n  </small>\n  <p>\n     ${e.content}\n    <br />\n    ${t}\n  </p>\n  <p>\n    <a\n      class="toggle-button-post"\n      href="/likes/toggle/?id=${e._id}&type=Post"\n      count-likes="0">\n      0 Like\n    </a>\n  </p>\n  <div class="post-comments">\n    <form action="/comments/create" class="post-${e._id}-comments-form" method="POST">\n      <input\n        type="text"\n        name="content"\n        placeholder="Type here to add comment required" />\n      <input type="hidden" name="post" value="${e._id}" />\n      <input type="submit" value="Add Comment" />\n    </form>\n    <div class="post-comments-list">\n      <ul class="post-comment-${e._id}">\n      </ul>\n    </div>\n  </div>\n</li>\n`),o=e=>{$(e).click((t=>{t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:e=>{$(`.post-${e.data.post_id}`).remove(),new Noty({theme:"relax",text:"Post deleted successfully!",type:"success",layout:"topRight",timeout:3e3}).show()},error:e=>{console.log(e.responseText)}})}))},s=e=>{let t=$(`.post-${e}-comments-form`);t.submit((e=>{e.preventDefault(),$.ajax({type:"post",url:"/comments/create",data:t.serialize(),success:e=>{console.log(e);let t=n(e.data.comment,e.data.name);$(`.post-comment-${e.data.comment.post}`).prepend(t),l($(" .delete-comment-button",t)),p($(" .toggle-button-comment",t)),new Noty({theme:"relax",text:"Comment created successfully!",type:"success",layout:"topRight",timeout:3e3}).show()},error:e=>{console.log(e.responseText)}})}))},n=(e,t)=>$(`<li class = "comment-${e._id}">\n  <p>\n    <small>\n      <a class ="delete-comment-button" href="/comments/destroy/${e._id}">X</a>\n    </small>\n    ${e.content}\n    <br />\n    ${t}\n  </p>\n  <p>\n    <a\n      class="toggle-button-comment"\n      href="/likes/toggle/?id=${e._id}&type=Comment"\n      count-likes="0">\n      0 Like\n    </a>\n  </p>\n</li>`),l=e=>{$(e).click((t=>{t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:e=>{$(`.comment-${e.data.comment_id}`).remove(),new Noty({theme:"relax",text:"Comment deleted successfully!",type:"success",layout:"topRight",timeout:3e3}).show()},error:e=>{console.log(e.responseText)}})}))},c=()=>{let e=$(".posts-list-container>ul>li");for(let t of e){o($(" .delete-post-button",t)),p($(" .toggle-button-post",t));let e=$(t).prop("class").split("-")[1];s(e),a(e)}},a=e=>{let t=$(`.post-comment-${e}>li`);for(let e of t)l($(" .delete-comment-button",e)),p($(" .toggle-button-comment",e))},p=e=>{$(e).click((t=>{t.preventDefault(),$.ajax({type:"post",url:$(e).prop("href"),success:t=>{let o=parseInt($(e).attr("count-likes"));1==t.data.deleted?o-=1:o+=1,$(e).attr("count-likes",o),$(e).html(`${o} Like`),console.log(o)},error:e=>{console.log("Error in completing the request: ",e.responseText)}})}))};e(),c()}